{:deps {:aliases [:dev :prod]}

 :nrepl {:port 8202
         :middleware
         [refactor-nrepl.middleware/wrap-refactor]}
 :builds
 {:app {:target     :browser
        :output-dir "public/js"
        :modules    {:main {:init-fn body-index-calculator.core/init
                            :entries [body-index-calculator.core]}}
        :dev        {:compiler-options
                     {:closure-defines
                      {"re_frame.trace.trace_enabled_QMARK_"        true
                       "day8.re_frame.tracing.trace_enabled_QMARK_" true}}}

        :devtools {:after-load body-index-calculator.core/on-hmr-reload
                   :http-root  "public"
                   :http-port  3000
                   :preloads   [day8.re-frame-10x.preload
                                devtools.preload]}}

  :devcards {:target     :browser
             :output-dir "public/js/devcards"
             :asset-path "/js/devcards"
             :modules    {:main {:entries [body-index-calculator.devcards.devcards]}}
             :devtools   {:http-root        "public"
                          :http-port        4001
                          :http-handler     shadow.http.push-state/handle
                          :push-state/index "devcards.html"
                          :after-load       body-index-calculator.devcards.devcacrds/main}
             :dev        {:compiler-options {:devcards true}}}

  :test {:target   :browser-test
         :test-dir "target/tests"
         :devtools {:http-root "target/tests"
                    :http-port 8021}}}}
